# 76、自定义的类型，能够作为信号与槽的参数吗？

自定义的类型如struct，需要使用*Q_DECLARE_METATYPE*进行声明，如果信号与槽在不同的线程的，连接前需要使用qRegisterMetaType进行注册。  
qRegisterMetaType()的核心作用是在运行时向Qt的元对象系统注册自定义类型，使其具备跨线程传递所需的序列化/反序列化能力。

``` c++
#include <QObject>
#include <QMetaType>  // 包含 qRegisterMetaType() 和 Q_DECLARE_METATYPE(

// 定义结构体
struct MyStruct 
{
    // ...
};


Q_DECLARE_METATYPE(MyStruct)    // 声明元类型

int main() 
{
    qRegisterMetaType<MyStruct>("MyStruct");// 注册元类型
    connect(...);
    // ...
}
```

如果需要在 Qt 元对象系统中使用结构体（如在 QVariant 中存储），这些步骤也是必需的。
